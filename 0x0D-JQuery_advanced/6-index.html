<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 6</title>

    </head>

    <body>

    </body>

    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous" type="application/javascript"></script>
    <script>
        function createFamilyTree() {
            const cellName_1 = $("<th></th>").text("Firstname");
            const cellName_2 = $("<th></th>").text("Lastname");

            $("body").append("<table/><thead/><tr/><tbody/>");
            $("thead tr:last").append(cellName_1, cellName_2)
        }

        function addNewMember(firstName, lastName, position) {
            const first = $("<td></td>").text(firstName);
            const last = $("<td></td>").text(lastName);
            const x = $("<td></td>").text("(x)").attr('id', 'delete').css("background-color", "orange");
            
            if (position === "before"){
                $("tbody").append("<tr/>").attr('id', 'table');
                $("tbody tr:last").append( first, last, x);
            }
            
            $("#table").on("click", "#delete", function() {
                $(this).closest("tr").remove();
            });
        }

        function createForm() {
            const form = $("<form></form>");
            const input_1 = $("<input/>", {type: 'text'}).attr('id', 'firstName');
            const input_2 = $("<input/>", {type: 'text'}).attr('id', 'lastName');
            const select = $("<select/>", {name: 'opt'}).append(
                $("<option/>", {value: 'before'}).text("Before"),
                $("<option/>", {value: 'after'}).text("After")
            ).attr('id', 'position');

            const button = $("<input/>", {type: 'submit'}).attr('id', 'submit');

            form.append(input_1, input_2, select, button);
            $("body").append(form);

            $("#submit").click(function(event){
                const firstName = $("#firstName").val();
                const lastName = $("#lastName").val();
                const position = $("#position").val();
                event.preventDefault();
                addNewMember(firstName, lastName, position);
            });
        }

        createForm();
        createFamilyTree()
        
    </script>
</html>
